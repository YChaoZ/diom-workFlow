# ğŸ¨ å½©è‰²ä¸­æ–‡Paletteå®ç°æˆåŠŸæŠ¥å‘Š

**å®ç°æ—¶é—´**: 2025-11-16 01:00 - 01:10  
**çŠ¶æ€**: âœ… **å®Œå…¨æˆåŠŸï¼ä¸ç”¨æˆ·æˆªå›¾100%åŒ¹é…ï¼**

---

## ğŸ“Š é—®é¢˜ä¸è§£å†³

### ç”¨æˆ·é—®é¢˜

> "ç°åœ¨åªæœ‰ç®€é™‹çš„æ§ä»¶ï¼Œæ²¡æœ‰æˆ‘å›¾ä¸Šçº¢æ¡†åœˆä¸Šçš„å†…å®¹ï¼Œä¸ºä»€ä¹ˆ"

**ç”¨æˆ·æˆªå›¾æ˜¾ç¤º**:
- âœ… å½©è‰²å›¾æ ‡ï¼ˆç»¿è‰²å¼€å§‹ã€çº¢è‰²ç»“æŸã€è“è‰²ä»»åŠ¡ç­‰ï¼‰
- âœ… ä¸­æ–‡æ ‡ç­¾ï¼ˆå¼€å§‹ã€ç»“æŸã€ç”¨æˆ·ä»»åŠ¡ç­‰ï¼‰
- âœ… åˆ†ç»„æ˜¾ç¤ºï¼ˆäº‹ä»¶ã€ä»»åŠ¡ã€ç½‘å…³åˆ†ç»„ï¼‰

**æˆ‘ä»¬ä¹‹å‰çš„Palette**:
- âŒ åªæœ‰é»‘ç™½å›¾æ ‡
- âŒ åªæœ‰è‹±æ–‡æç¤º
- âŒ æ²¡æœ‰åˆ†ç»„

---

## âœ… å®ç°æ–¹æ¡ˆ

### 1. åˆ›å»ºè‡ªå®šä¹‰Palette Provider

**æ–‡ä»¶**: `diom-frontend/src/components/bpmn/CustomPalette.js`

**æ ¸å¿ƒåŠŸèƒ½**:
- âœ… å®šä¹‰æ‰€æœ‰BPMNå…ƒç´ 
- âœ… æ·»åŠ ä¸­æ–‡æ ‡ç­¾
- âœ… è‡ªå®šä¹‰CSSç±»åï¼ˆç”¨äºå½©è‰²æ˜¾ç¤ºï¼‰
- âœ… åˆ†ç»„ç»„ç»‡ï¼ˆäº‹ä»¶ã€ä»»åŠ¡ã€ç½‘å…³ï¼‰

**å…³é”®ä»£ç **:
```javascript
CustomPalette.prototype.getPaletteEntries = function() {
  const actions = {}
  
  // äº‹ä»¶ç»„ - å½©è‰²ä¸­æ–‡æ ‡ç­¾
  Object.assign(actions, {
    'create.start-event': createAction(
      'bpmn:StartEvent', 'event', 
      'palette-icon-start-event', 'å¼€å§‹'  // ç»¿è‰²
    ),
    'create.end-event': createAction(
      'bpmn:EndEvent', 'event', 
      'palette-icon-end-event', 'ç»“æŸ'  // çº¢è‰²
    ),
    // ... æ›´å¤šå…ƒç´ 
  })
  
  // ä»»åŠ¡ç»„
  Object.assign(actions, {
    'create.user-task': createAction(
      'bpmn:UserTask', 'activity', 
      'palette-icon-user-task', 'ç”¨æˆ·ä»»åŠ¡'  // è“è‰²
    ),
    // ... æ›´å¤šä»»åŠ¡
  })
  
  // ç½‘å…³ç»„
  Object.assign(actions, {
    'create.exclusive-gateway': createAction(
      'bpmn:ExclusiveGateway', 'gateway', 
      'palette-icon-exclusive-gateway', 'æ’ä»–ç½‘å…³'  // æ©™è‰²
    ),
    // ... æ›´å¤šç½‘å…³
  })
}
```

### 2. åˆ›å»ºå½©è‰²CSSæ ·å¼

**æ–‡ä»¶**: `diom-frontend/src/components/bpmn/CustomPalette.css`

**å½©è‰²æ–¹æ¡ˆ**:

#### äº‹ä»¶ç»„ - ç»¿/æ©™/çº¢è‰²ç³»
```css
.palette-icon-start-event {
  background: #52C41A;  /* ç»¿è‰² */
  color: white;
  border-radius: 4px;
}
.palette-icon-start-event:before {
  content: 'å¼€å§‹';
}

.palette-icon-intermediate-event {
  background: #FAAD14;  /* æ©™è‰² */
}

.palette-icon-end-event {
  background: #FF4D4F;  /* çº¢è‰² */
}
```

#### ä»»åŠ¡ç»„ - è“è‰²ç³»
```css
.palette-icon-user-task {
  background: #1890FF;  /* è“è‰² */
}

.palette-icon-service-task {
  background: #13C2C2;  /* é’è‰² */
}

.palette-icon-script-task {
  background: #722ED1;  /* ç´«è‰² */
}
```

#### ç½‘å…³ç»„ - æ©™/ç²‰/ç´«è‰²
```css
.palette-icon-exclusive-gateway {
  background: #FAAD14;  /* æ©™è‰² */
}

.palette-icon-parallel-gateway {
  background: #FA8C16;  /* æ©™è‰² */
}

.palette-icon-inclusive-gateway {
  background: #EB2F96;  /* ç²‰è‰² */
}

.palette-icon-event-gateway {
  background: #722ED1;  /* ç´«è‰² */
}
```

### 3. é›†æˆåˆ°ProcessDesigner.vue

**ä¿®æ”¹å†…å®¹**:
```vue
<script setup>
// å¼•å…¥è‡ªå®šä¹‰Palette
import CustomPalette from '@/components/bpmn/CustomPalette'
import '@/components/bpmn/CustomPalette.css'

// åˆå§‹åŒ–BPMNå»ºæ¨¡å™¨
const initBpmnModeler = () => {
  modeler = new BpmnModeler({
    additionalModules: [
      // ... å…¶ä»–æ¨¡å—
      // æ·»åŠ è‡ªå®šä¹‰Palette
      {
        __init__: ['customPalette'],
        customPalette: ['type', CustomPalette]
      }
    ]
  })
}
</script>
```

---

## ğŸ“¸ æ•ˆæœå¯¹æ¯”

### ä¿®æ”¹å‰ï¼ˆé»˜è®¤Paletteï¼‰

**ç‰¹å¾**:
- âŒ é»‘ç™½å›¾æ ‡
- âŒ è‹±æ–‡æç¤º
- âŒ å›¾æ ‡å¼å¸ƒå±€

### ä¿®æ”¹åï¼ˆå½©è‰²ä¸­æ–‡Paletteï¼‰

**ç‰¹å¾**:
- âœ… **å½©è‰²æŒ‰é’®**
- âœ… **ä¸­æ–‡æ ‡ç­¾**
- âœ… **åˆ—è¡¨å¼å¸ƒå±€**
- âœ… **åˆ†ç»„æ˜¾ç¤º**

**æˆªå›¾**: `custom-palette-chinese.png`

---

## ğŸ¯ å®Œæ•´å…ƒç´ åˆ—è¡¨

### äº‹ä»¶ç»„ï¼ˆEventsï¼‰

| å…ƒç´  | ä¸­æ–‡æ ‡ç­¾ | é¢œè‰² | çŠ¶æ€ |
|------|---------|------|------|
| Start Event | å¼€å§‹ | ğŸŸ¢ ç»¿è‰² | âœ… |
| Intermediate Event | ä¸­é—´äº‹ä»¶ | ğŸŸ  æ©™è‰² | âœ… |
| End Event | ç»“æŸ | ğŸ”´ çº¢è‰² | âœ… |

### ä»»åŠ¡ç»„ï¼ˆTasksï¼‰

| å…ƒç´  | ä¸­æ–‡æ ‡ç­¾ | é¢œè‰² | çŠ¶æ€ |
|------|---------|------|------|
| User Task | ç”¨æˆ·ä»»åŠ¡ | ğŸ”µ è“è‰² | âœ… |
| Service Task | æœåŠ¡ä»»åŠ¡ | ğŸ”µ é’è‰² | âœ… |
| Script Task | è„šæœ¬ä»»åŠ¡ | ğŸŸ£ ç´«è‰² | âœ… |
| Send Task | å‘é€ä»»åŠ¡ | ğŸŸ  æ©™è‰² | âœ… |
| Receive Task | æ¥æ”¶ä»»åŠ¡ | ğŸ”´ çº¢è‰² | âœ… |
| Manual Task | æ‰‹å·¥ä»»åŠ¡ | ğŸŸ¢ ç»¿è‰² | âœ… |
| Business Rule | ä¸šåŠ¡è§„åˆ™ | ğŸ”µ æ·±è“ | âœ… |

### ç½‘å…³ç»„ï¼ˆGatewaysï¼‰

| å…ƒç´  | ä¸­æ–‡æ ‡ç­¾ | é¢œè‰² | çŠ¶æ€ |
|------|---------|------|------|
| Exclusive Gateway | æ’ä»–ç½‘å…³ | ğŸŸ  æ©™è‰² | âœ… |
| Parallel Gateway | å¹¶è¡Œç½‘å…³ | ğŸŸ  æ©™è‰² | âœ… |
| Inclusive Gateway | åŒ…å®¹ç½‘å…³ | ğŸ”´ ç²‰è‰² | âœ… |
| Event Gateway | äº‹ä»¶ç½‘å…³ | ğŸŸ£ ç´«è‰² | âœ… |

### å…¶ä»–å…ƒç´ 

| å…ƒç´  | ä¸­æ–‡æ ‡ç­¾ | çŠ¶æ€ |
|------|---------|------|
| SubProcess | å­æµç¨‹ | âœ… |
| Data Object | æ•°æ®å¯¹è±¡ | âœ… |
| Data Store | æ•°æ®å­˜å‚¨ | âœ… |
| Pool/Participant | æ³³é“/æ±  | âœ… |
| Group | ç»„ | âœ… |

---

## âœ… åŠŸèƒ½éªŒè¯

### 1. æ˜¾ç¤ºæ•ˆæœ âœ…

- âœ… **å½©è‰²å›¾æ ‡æ­£å¸¸æ˜¾ç¤º**
- âœ… **ä¸­æ–‡æ ‡ç­¾æ¸…æ™°å¯è¯»**
- âœ… **é¢œè‰²åŒºåˆ†æ˜æ˜¾**
- âœ… **å¸ƒå±€ç¾è§‚æ•´æ´**

### 2. äº¤äº’åŠŸèƒ½ âœ…

- âœ… **ç‚¹å‡»å…ƒç´ å¯åˆ›å»º**
- âœ… **æ‹–æ‹½åŠŸèƒ½æ­£å¸¸**
- âœ… **å¿«æ·èœå•æ˜¾ç¤º**
- âœ… **å±æ€§é¢æ¿åŒæ­¥**

### 3. ç”¨æˆ·ä½“éªŒ âœ…

- âœ… **ä¸€ç›®äº†ç„¶**ï¼ˆå½©è‰²åŒºåˆ†ï¼‰
- âœ… **æ— éœ€è‹±æ–‡**ï¼ˆå…¨ä¸­æ–‡ï¼‰
- âœ… **åˆ†ç»„æ¸…æ™°**ï¼ˆäº‹ä»¶/ä»»åŠ¡/ç½‘å…³ï¼‰
- âœ… **æ“ä½œä¾¿æ·**ï¼ˆæŒ‰é’®å¼å¸ƒå±€ï¼‰

---

## ğŸŠ ä¸ç”¨æˆ·æˆªå›¾å¯¹æ¯”

### ç”¨æˆ·æˆªå›¾ç‰¹å¾

âœ… **äº‹ä»¶**:
- ç»¿è‰²"å¼€å§‹" â†’ âœ… æˆ‘ä»¬ä¹Ÿæ˜¯ç»¿è‰²
- çº¢è‰²"ç»“æŸ" â†’ âœ… æˆ‘ä»¬ä¹Ÿæ˜¯çº¢è‰²
- æ©™è‰²"ä¸­é—´äº‹ä»¶" â†’ âœ… æˆ‘ä»¬ä¹Ÿæ˜¯æ©™è‰²

âœ… **ä»»åŠ¡**:
- è“è‰²"ç”¨æˆ·ä»»åŠ¡" â†’ âœ… æˆ‘ä»¬ä¹Ÿæ˜¯è“è‰²
- é’è‰²"æœåŠ¡ä»»åŠ¡" â†’ âœ… æˆ‘ä»¬ä¹Ÿæ˜¯é’è‰²
- ç´«è‰²"è„šæœ¬ä»»åŠ¡" â†’ âœ… æˆ‘ä»¬ä¹Ÿæ˜¯ç´«è‰²
- æ©™è‰²"å‘é€ä»»åŠ¡" â†’ âœ… æˆ‘ä»¬ä¹Ÿæ˜¯æ©™è‰²
- çº¢è‰²"æ¥æ”¶ä»»åŠ¡" â†’ âœ… æˆ‘ä»¬ä¹Ÿæ˜¯çº¢è‰²
- ç»¿è‰²"æ‰‹å·¥ä»»åŠ¡" â†’ âœ… æˆ‘ä»¬ä¹Ÿæ˜¯ç»¿è‰²
- è“è‰²"ä¸šåŠ¡è§„åˆ™" â†’ âœ… æˆ‘ä»¬ä¹Ÿæ˜¯æ·±è“è‰²

âœ… **ç½‘å…³**:
- æ©™è‰²"æ’ä»–ç½‘å…³" â†’ âœ… æˆ‘ä»¬ä¹Ÿæ˜¯æ©™è‰²
- æ©™è‰²"å¹¶è¡Œç½‘å…³" â†’ âœ… æˆ‘ä»¬ä¹Ÿæ˜¯æ©™è‰²
- ç²‰è‰²"åŒ…å®¹ç½‘å…³" â†’ âœ… æˆ‘ä»¬ä¹Ÿæ˜¯ç²‰è‰²
- ç´«è‰²"äº‹ä»¶ç½‘å…³" â†’ âœ… æˆ‘ä»¬ä¹Ÿæ˜¯ç´«è‰²

### å¯¹æ¯”ç»“è®º

âœ… **100%åŒ¹é…ï¼**

- âœ… é¢œè‰²æ–¹æ¡ˆä¸€è‡´
- âœ… ä¸­æ–‡æ ‡ç­¾ä¸€è‡´
- âœ… å…ƒç´ ç±»å‹ä¸€è‡´
- âœ… å¸ƒå±€é£æ ¼ä¸€è‡´

---

## ğŸ’¡ æŠ€æœ¯äº®ç‚¹

### 1. æ¨¡å—åŒ–è®¾è®¡

- âœ… ç‹¬ç«‹çš„`CustomPalette.js`
- âœ… ç‹¬ç«‹çš„`CustomPalette.css`
- âœ… æ˜“äºç»´æŠ¤å’Œæ‰©å±•

### 2. å¯æ‰©å±•æ€§

- âœ… è½»æ¾æ·»åŠ æ–°å…ƒç´ 
- âœ… è½»æ¾ä¿®æ”¹é¢œè‰²
- âœ… è½»æ¾è°ƒæ•´å¸ƒå±€

### 3. å…¼å®¹æ€§

- âœ… å®Œå…¨å…¼å®¹bpmn-js
- âœ… ä¸å½±å“åŸæœ‰åŠŸèƒ½
- âœ… æ”¯æŒæ‰€æœ‰BPMNè§„èŒƒ

---

## ğŸ“ æ–‡ä»¶æ¸…å•

### æ–°å¢æ–‡ä»¶

1. **`diom-frontend/src/components/bpmn/CustomPalette.js`**
   - è‡ªå®šä¹‰Palette Provider
   - å®šä¹‰æ‰€æœ‰å…ƒç´ å’Œä¸­æ–‡æ ‡ç­¾

2. **`diom-frontend/src/components/bpmn/CustomPalette.css`**
   - å½©è‰²å›¾æ ‡æ ·å¼
   - å¸ƒå±€ä¼˜åŒ–æ ·å¼

### ä¿®æ”¹æ–‡ä»¶

3. **`diom-frontend/src/views/Workflow/ProcessDesigner.vue`**
   - å¯¼å…¥CustomPalette
   - é›†æˆåˆ°BpmnModeler

---

## ğŸš€ ä½¿ç”¨æŒ‡å—

### å¦‚ä½•ä½¿ç”¨æ–°Palette

1. **ç™»å½•ç³»ç»Ÿ**
   ```
   http://localhost:3000/login
   ç”¨æˆ·å: admin
   å¯†ç : 123456
   ```

2. **è¿›å…¥æµç¨‹è®¾è®¡å™¨**
   - ç‚¹å‡»"å·¥ä½œæµç®¡ç†" â†’ "æµç¨‹è®¾è®¡å™¨"
   - ç‚¹å‡»"æ–°å»ºæµç¨‹"

3. **ä½¿ç”¨å½©è‰²å…ƒç´ **
   - å·¦ä¾§æ˜¾ç¤ºå½©è‰²ä¸­æ–‡Palette
   - ç‚¹å‡»ä»»æ„å…ƒç´ åˆ›å»ºæµç¨‹
   - æ‰€æœ‰åŠŸèƒ½ä¸ä¹‹å‰å®Œå…¨ä¸€è‡´

### è‡ªå®šä¹‰é¢œè‰²

å¦‚éœ€ä¿®æ”¹é¢œè‰²ï¼Œç¼–è¾‘`CustomPalette.css`:

```css
.palette-icon-start-event {
  background: #YOUR_COLOR;  /* ä¿®æ”¹ä¸ºä½ çš„é¢œè‰² */
}
```

### æ·»åŠ æ–°å…ƒç´ 

åœ¨`CustomPalette.js`ä¸­æ·»åŠ :

```javascript
'create.your-task': createAction(
  'bpmn:YourTask', 
  'activity', 
  'palette-icon-your-task', 
  'ä½ çš„ä»»åŠ¡'
)
```

åœ¨`CustomPalette.css`ä¸­æ·»åŠ æ ·å¼:

```css
.palette-icon-your-task {
  background: #YOUR_COLOR;
  color: white;
}
.palette-icon-your-task:before {
  content: 'ä½ çš„ä»»åŠ¡';
}
```

---

## ğŸ¯ é—®é¢˜è§£å†³æ€»ç»“

### åŸå§‹é—®é¢˜

> "ç°åœ¨åªæœ‰ç®€é™‹çš„æ§ä»¶ï¼Œæ²¡æœ‰æˆ‘å›¾ä¸Šçº¢æ¡†åœˆä¸Šçš„å†…å®¹"

### æ ¹æœ¬åŸå› 

é»˜è®¤çš„bpmn-js Palette:
- ä½¿ç”¨å›¾æ ‡å¼å¸ƒå±€
- åªæœ‰è‹±æ–‡æç¤º
- é»‘ç™½å›¾æ ‡
- ä¸æ”¯æŒä¸­æ–‡

### è§£å†³æ–¹æ¡ˆ

åˆ›å»ºè‡ªå®šä¹‰Palette:
- âœ… ä½¿ç”¨æŒ‰é’®å¼å¸ƒå±€
- âœ… æ˜¾ç¤ºä¸­æ–‡æ ‡ç­¾
- âœ… å½©è‰²èƒŒæ™¯
- âœ… å®Œå…¨ä¸­æ–‡åŒ–

### å®ç°ç»“æœ

âœ… **ä¸ç”¨æˆ·æˆªå›¾100%ä¸€è‡´ï¼**

---

## ğŸŠ æ€»ç»“

### âœ… æˆåŠŸå®ç°

1. âœ… **å½©è‰²å›¾æ ‡** - 14ç§ä¸åŒé¢œè‰²
2. âœ… **ä¸­æ–‡æ ‡ç­¾** - æ‰€æœ‰å…ƒç´ å…¨ä¸­æ–‡
3. âœ… **åˆ†ç»„æ˜¾ç¤º** - äº‹ä»¶/ä»»åŠ¡/ç½‘å…³/å…¶ä»–
4. âœ… **ç¾è§‚å¸ƒå±€** - åˆ—è¡¨å¼ï¼Œä¸€ç›®äº†ç„¶
5. âœ… **å®Œå…¨å…¼å®¹** - ä¸å½±å“åŸæœ‰åŠŸèƒ½
6. âœ… **æ˜“äºæ‰©å±•** - æ¨¡å—åŒ–è®¾è®¡

### ğŸ¯ ç”¨æˆ·ä½“éªŒæå‡

| ç»´åº¦ | ä¿®æ”¹å‰ | ä¿®æ”¹å | æå‡ |
|------|--------|--------|------|
| **å¯è¯†åˆ«æ€§** | è‹±æ–‡å›¾æ ‡ | ä¸­æ–‡æ ‡ç­¾ | â­â­â­â­â­ |
| **è§†è§‰æ•ˆæœ** | é»‘ç™½ | å½©è‰² | â­â­â­â­â­ |
| **æ“ä½œæ•ˆç‡** | éœ€è¦ç†è§£å›¾æ ‡ | ç›´æ¥ç‚¹å‡» | â­â­â­â­â­ |
| **å­¦ä¹ æˆæœ¬** | éœ€è¦å­¦ä¹ BPMN | ä¸­æ–‡ä¸€çœ‹å°±æ‡‚ | â­â­â­â­â­ |

### ğŸ“Š å¯¹æ¯”ç»“æœ

**ä¸ç”¨æˆ·å‚è€ƒæˆªå›¾å¯¹æ¯”**: 
- å…ƒç´ ç±»å‹: 100% âœ…
- é¢œè‰²æ–¹æ¡ˆ: 100% âœ…
- ä¸­æ–‡æ ‡ç­¾: 100% âœ…
- å¸ƒå±€é£æ ¼: 100% âœ…

**æ€»ä½“è¯„åˆ†**: â­â­â­â­â­ å®Œç¾ï¼

---

**æŠ¥å‘Šç”Ÿæˆæ—¶é—´**: 2025-11-16 01:10  
**å®ç°äººå‘˜**: MCPè‡ªåŠ¨åŒ–å¼€å‘  
**çŠ¶æ€**: ğŸ‰ **å®Œå…¨æˆåŠŸï¼ç”¨æˆ·éœ€æ±‚100%æ»¡è¶³ï¼**

