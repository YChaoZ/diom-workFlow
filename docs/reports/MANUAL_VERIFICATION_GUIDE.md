# 🔍 手动验证指南 - Assignee字段测试

## ⏱️ 预计时间：5分钟

---

## 📋 验证步骤

### Step 1: 创建用户任务 (1分钟)

1. **确保你在流程设计器页面**
   - URL: `http://localhost:3000/workflow/design/new`
   - 左侧有工具栏，中间有画布，右侧有属性面板

2. **找到"用户任务"**
   - 在左侧工具栏的"任务"分组中
   - 蓝色图标，显示👤和"用户任务"文字

3. **拖拽用户任务到画布**
   - 点击并按住"用户任务"
   - 拖拽到画布中间（开始事件右侧）
   - 释放鼠标，用户任务应该出现在画布上

---

### Step 2: 连接元素 (1分钟)

1. **点击开始事件**
   - 开始事件周围会出现连接点

2. **创建连接**
   - 点击开始事件右侧的连接点
   - 拖拽到用户任务
   - 释放，自动创建箭头连接

---

### Step 3: 验证Assignee字段 ⭐ (2分钟)

1. **选中用户任务**
   - 点击画布上的用户任务
   - 右侧属性面板标题应变为"USER TASK"

2. **展开General分组**
   - 点击"General"右侧的展开按钮
   - 应该显示多个输入字段

3. **查找Assignee字段**
   ```
   预期显示：
   ┌─────────────────────┐
   │ General         ▼   │
   ├─────────────────────┤
   │ Name     [用户任务 ]│
   │ ID       [Activity_]│
   │ Assignee [       ] │← ⭐ 这个字段是关键！
   └─────────────────────┘
   ```

4. **测试Assignee输入**
   - 在Assignee输入框中输入：`admin`
   - 按Enter或点击其他区域
   - 输入的值应该保存

---

### Step 4: 保存并验证 (1分钟)

1. **填写流程基本信息**
   - 流程名称：`测试Assignee字段`
   - 流程Key：`test-assignee`
   - 流程分类：选择"人事"

2. **保存草稿**
   - 点击顶部"保存草稿"按钮
   - 应该提示"草稿保存成功"

3. **验证BPMN**
   - 点击"验证"按钮
   - 应该提示"BPMN验证通过"

4. **导出XML检查（可选）**
   - 点击"导出XML"按钮
   - 打开导出的.bpmn文件
   - 搜索`camunda:assignee`
   - 应该找到：`camunda:assignee="admin"`

---

## ✅ 验证标准

| 检查项 | 预期结果 | 实际结果 |
|--------|---------|---------|
| 1. 用户任务可拖拽创建 | ✅ | ☐ |
| 2. 元素可连接 | ✅ | ☐ |
| 3. Assignee字段显示 | ✅ | ☐ |
| 4. Assignee可输入编辑 | ✅ | ☐ |
| 5. 保存后Assignee值保留 | ✅ | ☐ |
| 6. XML中包含assignee属性 | ✅ | ☐ |

**通过标准**: 全部6项✅

---

## 🐛 常见问题

### Q1: 找不到Assignee字段？
**可能原因**:
- CamundaPlatformPropertiesProviderModule 未正确加载
- 选中的不是用户任务（而是其他类型任务）

**解决方案**:
1. 确认右侧属性面板标题是"USER TASK"
2. 刷新页面，重新尝试
3. 检查Console是否有JavaScript错误

### Q2: Assignee字段是灰色不可编辑？
**可能原因**:
- 元素处于某种锁定状态

**解决方案**:
1. 点击画布空白区域取消选择
2. 重新点击用户任务
3. 尝试展开其他分组再回到General

### Q3: 保存后Assignee值丢失？
**可能原因**:
- camunda-bpmn-moddle 扩展配置问题

**解决方案**:
1. 检查`ProcessDesigner.vue`中的`moddleExtensions`配置
2. 确认包含：`moddleExtensions: { camunda: CamundaBpmnModdle }`
3. 重新编译前端

---

## 📸 参考截图

### 期望的Assignee字段位置
```
右侧属性面板 →
┌─────────────────────────────┐
│ ⚙ USER TASK                 │
│    任务名称                  │
├─────────────────────────────┤
│ General              ▼      │← 点击展开
├─────────────────────────────┤
│ Name                        │
│ ┌─────────────────────────┐ │
│ │ 用户任务                 │ │
│ └─────────────────────────┘ │
│                             │
│ ID                          │
│ ┌─────────────────────────┐ │
│ │ Activity_xxxxx          │ │
│ └─────────────────────────┘ │
│                             │
│ Assignee            ⭐      │← 这里！
│ ┌─────────────────────────┐ │
│ │ admin                   │ │← 输入用户名
│ └─────────────────────────┘ │
├─────────────────────────────┤
│ Candidate users             │
│ Candidate groups            │
│ Due date                    │
│ ...                         │
└─────────────────────────────┘
```

---

## 📝 验证完成后

### ✅ 如果验证通过
请回复：**"Assignee字段验证通过"**

我们将继续：
- Phase 1.2: 启用元素连接功能（Context Pad）
- Phase 1.3: 添加编辑工具栏
- Phase 1.4: UI优化

### ❌ 如果验证失败
请提供：
1. 失败的具体步骤
2. 错误截图或错误信息
3. Console中的错误日志

我们将立即排查和修复问题。

---

**预计总时间**: 5分钟  
**难度等级**: ⭐ 简单  
**重要性**: ⭐⭐⭐ 高（核心功能验证）

